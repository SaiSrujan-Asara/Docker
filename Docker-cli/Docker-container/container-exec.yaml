âœ… Docker exec Command

docker exec is used to run a new command inside an existing, running container.
Unlike docker start or docker run, it does not start the container itself â€” the container must already be running.

---
ğŸ”¹ 1. Basic Syntax

docker exec [OPTIONS] CONTAINER COMMAND [ARG...]

CONTAINER â†’ container name or ID

COMMAND â†’ command you want to run inside the container

[ARG...] â†’ arguments for the command

---
ğŸ”¹ 2. Key Flags

| Flag                  | Description                               | Example                                        |
| --------------------- | ----------------------------------------- | ---------------------------------------------- |
| `-i`, `--interactive` | Keep STDIN open                           | `docker exec -i mycontainer bash`              |
| `-t`, `--tty`         | Allocate a pseudo-TTY                     | `docker exec -t mycontainer bash`              |
| `-it`                 | Combine `-i` + `-t` for interactive shell | `docker exec -it mycontainer bash`             |
| `-d`, `--detach`      | Run command in background                 | `docker exec -d mycontainer sleep 60`          |
| `--user`              | Run command as specific user              | `docker exec -it --user root mycontainer bash` |
| `--privileged`        | Run with extended privileges              | `docker exec --privileged mycontainer bash`    |


---
ğŸ”¹ 3. Main vs Non-Main Process

docker exec runs a new process inside the container, separate from PID 1

This means:

You can interact with non-main processes

You do not interfere with the containerâ€™s main process

--
Example

docker exec -it mynginx bash

PID 1 â†’ nginx (daemon)

bash â†’ new process, interactive shell inside container

You can inspect, debug, or run commands without stopping nginx

---
ğŸ”¹ 4. Examples

Example 1 â€” Interactive shell in running container

docker exec -it myubuntu bash

Opens a bash shell in container

Can type commands:

root@container:/# ls
bin  etc  home  var
root@container:/# whoami
root

--
Example 2 â€” Run a command non-interactively

docker exec mynginx cat /etc/nginx/nginx.conf

Prints the config file

Runs a new process

No shell opened

--
Example 3 â€” Run a process in the background

docker exec -d mycontainer sleep 60

Runs sleep 60 as a detached process

PID 1 (main process) is unaffected

--
Example 4 â€” Run as a different user

docker exec -it --user www-data mynginx bash

Opens shell as www-data user

Useful for debugging permission issues

---
ğŸ”¹ 5. Behavior Summary

| Behavior                            | docker exec                         | docker start -ai       | docker run -ai                  |
| ----------------------------------- | ----------------------------------- | ---------------------- | ------------------------------- |
| Attach to main process              | âŒ No                                | âœ… Yes                  | âœ… Yes (new container)           |
| Create new process inside container | âœ… Yes                               | âŒ No                   | âœ… Yes (new container)           |
| Interactive shell                   | âœ… Yes with `-it`                    | Only if PID 1 is shell | Only if CMD/ENTRYPOINT is shell |
| Affect main process                 | âŒ Main process continues unaffected | âœ… PID 1                | âœ… New PID 1 for container       |
| Attach to logs                      | âŒ Not automatically                 | âœ… Yes                  | âœ… Yes                           |


---
ğŸ”¹ 6. Best Practices

Use docker exec -it for debugging running containers

Do not use exec for starting long-running daemons â€” use docker start -d or docker run -d instead

Use --user to debug permissions inside the container

Use -d to run background commands safely

Combine with ps, top, netstat inside the container to monitor processes

---
ğŸ”¹ 7. Edge Cases / Notes

docker exec cannot run in a stopped container â†’ container must be running

You can open multiple exec sessions simultaneously

Does not change containerâ€™s PID 1

Interactive sessions require -it; without -t, you may see formatting issues