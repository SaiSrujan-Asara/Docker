ğŸ§  Concept Overview

The docker container create command is used to create a new container from a specified image without starting it.

Think of it as:

â€œPrepare everything for the container, but donâ€™t turn it on yet.â€

Analogy:

docker container run = â€œPlug in the appliance and switch it on.â€

docker container create = â€œPlug in the appliance, but donâ€™t press the power button yet.â€

âš™ï¸ Basic Syntax

docker container create [OPTIONS] IMAGE [COMMAND] [ARG...]

Example 1 â€” Basic Usage

docker container create ubuntu

Output:

3d2f85c6df1b6a...

This returns a container ID, meaning the container is created but not running.

You can start it later using:

docker container start <container_id>

---
ğŸ§© Internal Working

When you run docker container create, Docker does the following:

Pulls the image (if not available locally)

Creates a container layer (a thin writable layer on top of the image)

Allocates metadata (container ID, name, settings, env vars, etc.)

Does not start the containerâ€™s main process â€” it stays in Created state.

---

ğŸ“‹ Check Created Containers

You can list all containers (including stopped/created ones) with:

docker container ls -a

Youâ€™ll see your newly created container in the Created state.

---
ğŸ”¹ Why use docker container create?

While docker container run is more common, docker container create is useful when:

You want to prepare a container first, then start it later (controlled lifecycle).

You want to customize settings before starting (mount volumes, set networks, etc.).

In CI/CD or orchestration systems, containers may be created in one step, and started later.

When you want to inspect the container configuration before launching it.

---
âš™ï¸ Common Options (with Examples)

Letâ€™s go over the most commonly used parameters with docker container create.

--
ğŸ·ï¸ 1. --name

Assign a custom name to the container.

docker container create --name my_ubuntu ubuntu

Benefit: Easier management (instead of using long IDs).

--
ğŸŒ 2. -p (Port mapping)

Expose containerâ€™s ports to the host.

docker container create -p 8080:80 nginx

You can start it later:

docker container start nginx

--
ğŸ“ 3. -v or --volume

Mount host directory or volume into the container.

docker container create -v /data:/app/data ubuntu

--
ğŸ§‘â€ğŸ’» 4. -e (Environment variable)

Set environment variables.

docker container create -e ENV=dev -e DEBUG=true ubuntu env

--
ğŸ§° 5. --network

Attach the container to a custom network.

docker network create app_network
docker container create --network app_network --name db mysql

--
ğŸ”§ 6. --entrypoint

Override the imageâ€™s default entrypoint.

docker container create --entrypoint "/bin/bash" ubuntu

--
ğŸ”„ 7. --restart

Set restart policy (useful for containers that will be started later).

docker container create --name api --restart=always nginx

--
ğŸ§ 8. -u (User)

Run container as a specific user.

docker container create -u 1000:1000 ubuntu

--
ğŸ§® 9. Resource Constraints

You can define limits before running the container.

docker container create --memory="512m" --cpus="1.5" ubuntu

--
ğŸ—‚ï¸ 10. --env-file

Load environment variables from a file.

docker container create --env-file config.env nginx

--
ğŸ§© Example â€” Real Use Case

Example 1: Pre-Create a Web Server for Controlled Start

docker container create --name web-test -p 8080:80 nginx

â†’ Now check:

docker container ls -a

Youâ€™ll see:

CONTAINER ID   IMAGE   COMMAND                  STATUS     NAMES
1a2b3c4d5e6f   nginx   "/docker-entrypoint.â€¦"   Created    web-test

â†’ Start it when ready:

docker container start web-test

--
Example 2: Use in a Two-Step CI/CD Pipeline

Step 1: Create container with environment setup

docker container create --name app-build -v $(pwd):/app -w /app node:18 npm install

Step 2: Start container later to execute the build

docker container start -a app-build

âœ… This separation gives you control â€” useful for automation pipelines or orchestrators.

ğŸ§  Differences: docker container run vs docker container create

| Feature                   | `docker container create`                         | `docker container run`                  |
| ------------------------- | ------------------------------------------------- | --------------------------------------- |
| **Creates container**     | âœ… Yes                                             | âœ… Yes                                   |
| **Starts container**      | âŒ No                                              | âœ… Yes                                   |
| **Output**                | Returns container ID                              | Prints command output (if not detached) |
| **Use Case**              | Pre-configure, inspect, or script container setup | One-step start and run                  |
| **Requires manual start** | âœ…                                                 | âŒ                                       |
| **Lifecycle control**     | More granular (create â†’ start â†’ exec â†’ stop)      | Quick execution                         |

Example Comparison:
# Create (only)
docker container create --name myapp nginx

# Then start it later
docker container start myapp

# Equivalent single-step
docker container run --name myapp nginx

ğŸ§© Use Cases by Environment

| Environment      | Use Case                                               | Example                                                     |
| ---------------- | ------------------------------------------------------ | ----------------------------------------------------------- |
| **Development**  | Pre-setup container with code mounts                   | `docker container create -v $(pwd):/app -it ubuntu`         |
| **Testing / CI** | Create container, run tests later                      | `docker container create --name test python:3 pytest`       |
| **Production**   | Prepare containers for orchestrators (Kubernetes, ECS) | `docker container create --name api --restart=always nginx` |
| **Debugging**    | Inspect configuration before running                   | `docker container create --entrypoint bash nginx`           |

ğŸ§­ Best Practices

âœ… Use --name for easy identification
âœ… Use docker inspect after create to verify configuration before starting
âœ… Pre-create containers in automated workflows (CI/CD, staging)
âœ… Avoid create for quick runs â€” use run instead
âœ… Use --env-file and --restart in production setups
âœ… Combine with docker container commit for snapshot workflows

---
ğŸ§© Deep Dive â€” Internal Lifecycle

Letâ€™s visualize what happens:

docker container create ubuntu

Docker creates a container metadata entry in /var/lib/docker/containers/<id>/

Sets up:

Mount points

Network config

Environment variables

Entrypoint & command

Container state = Created

No process (PID) is running yet.

Then when you do:

docker container start <id>

â†’ Docker launches the defined command and attaches networking & filesystem namespaces.

---
ğŸ§° Troubleshooting & Inspection Commands

| Command                           | Description                    |
| --------------------------------- | ------------------------------ |
| `docker container ls -a`          | View created containers        |
| `docker container inspect <name>` | Inspect config & settings      |
| `docker container start <name>`   | Start container                |
| `docker container rm <name>`      | Remove container if not needed |

ğŸ§© Example â€” Full Workflow

# 1. Create container
docker container create --name myapp -p 8080:80 nginx

# 2. Verify configuration
docker container inspect myapp

# 3. Start container
docker container start myapp

# 4. Confirm itâ€™s running
docker container ls

ğŸ§  Summary

| Aspect            | Description                          |
| ----------------- | ------------------------------------ |
| **Purpose**       | Create container without running it  |
| **Common Use**    | Preparation, inspection, or CI/CD    |
| **Default State** | Created (not running)                |
| **Next Step**     | Use `docker container start`         |
| **Similar To**    | First part of `docker container run` |


ğŸ³ docker container create â€” Environment-wise Parameter Strategy

ğŸ§‘â€ğŸ’» 1ï¸âƒ£ Development Environment

| Parameter      | Example                   | Description / Use Case                         |
| -------------- | ------------------------- | ---------------------------------------------- |
| `--name`       | `--name dev-api`          | Easy identification during dev                 |
| `-it`          | `-it`                     | Interactive mode for shell work                |
| `-v`           | `-v $(pwd):/app`          | Mount current code for live editing            |
| `-p`           | `-p 3000:3000`            | Expose dev app to host                         |
| `--rm`         | `--rm`                    | Remove container when done                     |
| `-e`           | `-e NODE_ENV=development` | Set environment variables                      |
| `--workdir`    | `--workdir /app`          | Set working directory                          |
| `--network`    | `--network devnet`        | Connect app containers to same dev network     |
| `--entrypoint` | `--entrypoint bash`       | Start with shell for experimentation           |
| `-u`           | `-u $(id -u):$(id -g)`    | Match host user (avoid file permission issues) |

docker container create \
  --name node-dev \
  -it --rm \
  -v $(pwd):/usr/src/app \
  -w /usr/src/app \
  -p 3000:3000 \
  -e NODE_ENV=development \
  node:18


ğŸ§ª 2ï¸âƒ£ Testing / CI-CD Environment

| Parameter                          | Example                  | Description                               |
| ---------------------------------- | ------------------------ | ----------------------------------------- |
| `--name`                           | `--name test-runner`     | For CI log tracking                       |
| `--rm`                             | `--rm`                   | Clean up automatically after test         |
| `--pull always`                    | `--pull always`          | Always use latest image                   |
| `-v`                               | `-v $(pwd):/tests`       | Mount code/tests                          |
| `-w`                               | `-w /tests`              | Set workdir for test execution            |
| `-e`                               | `-e TEST_ENV=ci`         | Inject CI-specific vars                   |
| `--network`                        | `--network test_net`     | Multi-container testing                   |
| `--entrypoint`                     | `--entrypoint pytest`    | Directly override entrypoint to run tests |
| `--env-file`                       | `--env-file .env.ci`     | Load test configs                         |
| `--cpus`, `--memory`               | `--cpus=1 --memory=512m` | Enforce limits in CI                      |
| `--security-opt=no-new-privileges` |                          | Avoid privilege escalation during tests   |


docker container create \
  --name pytest-container \
  --rm \
  --pull always \
  -v $(pwd):/tests \
  -w /tests \
  -e TEST_ENV=ci \
  --network test_net \
  --env-file .env.ci \
  --cpus=1 --memory=512m \
  python:3.12 pytest -v


ğŸ­ 3ï¸âƒ£ Production / Staging Environment

| Parameter                    | Example                                                                   | Description                                                                              |          |                   |
| ---------------------------- | ------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- | -------- | ----------------- |
| `--name`                     | `--name web-api`                                                          | Consistent naming for monitoring/logging                                                 |          |                   |
| `-d`                         | `-d`                                                                      | Background mode (though usually used with `run`, you can pre-create detached containers) |          |                   |
| `-p`                         | `-p 443:443`                                                              | Expose services                                                                          |          |                   |
| `-v`                         | `-v app_data:/usr/share/app/data`                                         | Persist volumes                                                                          |          |                   |
| `--env-file`                 | `--env-file /etc/app/prod.env`                                            | Centralize config                                                                        |          |                   |
| `--restart`                  | `--restart=always`                                                        | Auto-restart on failure                                                                  |          |                   |
| `--health-cmd`               | `--health-cmd="curl -f [http://localhost/health](http://localhost/health) |                                                                                          | exit 1"` | Health monitoring |
| `--memory`, `--cpus`         | `--memory=1G --cpus=2`                                                    | Resource limits                                                                          |          |                   |
| `--log-driver` / `--log-opt` | `--log-driver=json-file --log-opt max-size=10m --log-opt max-file=3`      | Control logs                                                                             |          |                   |
| `--security-opt`             | `--security-opt=no-new-privileges`                                        | Drop privilege escalation                                                                |          |                   |
| `--cap-drop`                 | `--cap-drop=ALL`                                                          | Remove unnecessary Linux capabilities                                                    |          |                   |
| `--user`                     | `--user 1000`                                                             | Drop root user                                                                           |          |                   |
| `--read-only`                | `--read-only`                                                             | Make filesystem immutable                                                                |          |                   |
| `--network`                  | `--network prod_net`                                                      | Attach to prod overlay network                                                           |          |                   |


docker container create \
  --name api-service \
  -p 80:80 \
  -v app_logs:/var/log/app \
  -v app_data:/usr/share/app \
  --env-file /etc/app/prod.env \
  --restart=always \
  --memory=1G --cpus=2 \
  --log-driver=json-file \
  --log-opt max-size=10m --log-opt max-file=5 \
  --security-opt=no-new-privileges \
  --cap-drop=ALL \
  --user 1000 \
  --read-only \
  --network prod_net \
  --health-cmd="curl -f http://localhost/health || exit 1" \
  nginx:1.25-alpine


ğŸ” 4ï¸âƒ£ Troubleshooting / Debugging Environment

| Parameter                                      | Example                                   | Description                                      |
| ---------------------------------------------- | ----------------------------------------- | ------------------------------------------------ |
| `-it`                                          | `-it`                                     | Interactive shell                                |
| `--rm`                                         | `--rm`                                    | Temporary debugging container                    |
| `--entrypoint`                                 | `--entrypoint bash`                       | Override entrypoint for manual debugging         |
| `--privileged`                                 | `--privileged`                            | (Caution) full system access for low-level tools |
| `--network container:<name>`                   | `--network container:api-service`         | Share network namespace with target container    |
| `--pid host`                                   | `--pid host`                              | View host processes                              |
| `--cap-add`                                    | `--cap-add=SYS_PTRACE`                    | Enable debugging tools                           |
| `-v /var/run/docker.sock:/var/run/docker.sock` | Mount Docker socket for host access       |                                                  |
| `-e`                                           | `-e DEBUG=true`                           | Enable debug flags                               |
| `--security-opt apparmor=unconfined`           | Disable AppArmor temporarily (debug only) |                                                  |


docker container create \
  --name debug-nginx \
  -it --rm \
  --network container:api-service \
  --entrypoint bash \
  --cap-add=SYS_PTRACE \
  alpine:latest


âš™ï¸ General Best Practices

âœ… Always name your containers (--name)
âœ… Mount volumes properly (-v or --mount)
âœ… In CI, use --rm to avoid clutter
âœ… For production, use --env-file instead of -e inline secrets
âœ… Enforce memory/CPU limits
âœ… Enable health checks for reliability
âœ… Avoid --privileged unless absolutely required
âœ… Use --cap-add for minimal permission escalation